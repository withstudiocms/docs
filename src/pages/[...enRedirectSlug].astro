---
// Redirect from base to /en/ pages
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import { englishPages } from '~/content';
import { stripLangFromSlug } from '~/util/path-utils';

export async function getStaticPaths() {
	return englishPages.map((page) => {
		return {
			params: {
				enRedirectSlug: stripLangFromSlug(page.id),
			},
			props: {
				title: page.data.title,
				description: page.data.description,
				englishSlug: page.id,
			},
		};
	});
}

const { title, description, englishSlug } = Astro.props;
---
<StarlightPage frontmatter={{ title, description, template: 'splash' }}>
    <meta http-equiv="refresh" content={`0;url=/${englishSlug}/`} />
</StarlightPage>