---
i18nReady: true
title: å¿«é€Ÿå…¥é—¨æŒ‡å—
description: å¼€å§‹ä½¿ç”¨ StudioCMS è¿›è¡Œå¼€å‘
sidebar:
   order: 1
---

import { PackageManagers } from 'starlight-package-managers'
import TursoCLI from '~/components/TursoCLI.astro';
import { Aside, Steps, Tabs, TabItem, LinkCard } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';
import { sponsors, SponsorLink } from '~/share-link'

<LinkCard title="å‡çº§åˆ°æœ€æ–°ç‰ˆ StudioCMS" href="/en/guides/upgrade/latest/" description="éœ€è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿè¯·æŸ¥çœ‹è¿™é‡Œï¼" />

## å¼€å§‹å‰çš„å‡†å¤‡å·¥ä½œ

ä½¿ç”¨ StudioCMS éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- æ”¯æŒ Astro çš„ [Node.js ç‰ˆæœ¬](https://docs.astro.build/en/install-and-setup/#prerequisites)ï¼ˆä¸æ”¯æŒ Bun å’Œ Denoï¼‰
- ä¸€ä¸ª Astro é¡¹ç›®
- libSQL æ•°æ®åº“æä¾›å•†æˆ–[è‡ªæ‰˜ç®¡ libSQL æœåŠ¡å™¨][self-hosted-libsql]
- StudioCMS é›†æˆ

## å‡†å¤‡æ•°æ®åº“

StudioCMS ä½¿ç”¨ `@astrojs/db` è¿æ¥æ‚¨çš„ libSQL æ•°æ®åº“ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä»»ä½• libSQL æä¾›å•†æˆ–[è‡ªæ‰˜ç®¡ libSQL æœåŠ¡å™¨][self-hosted-libsql]ã€‚

å¦‚æœæ‚¨ä½¿ç”¨ StudioCMS CLIï¼Œå¹¶ä¸”å·²å®‰è£… Turso CLIï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨ CLI åˆ›å»ºæ–°æ•°æ®åº“ã€‚

<ReadMore>æœ‰å…³æ‰€éœ€ç¯å¢ƒå˜é‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [`@astrojs/db` æ•°æ®åº“è¿æ¥å‚æ•°][db-url-token]</ReadMore>

### ä½¿ç”¨ Turso å¿«é€Ÿå…¥é—¨

<Aside type='tip' title='StudioCMS ä¸“å±ä¼˜æƒ '>
 ä½¿ç”¨ä¼˜æƒ ç  `STUDIOCMS10` å¯äº« Turso æœåŠ¡ 12 ä¸ªæœˆ 10% æŠ˜æ‰£ã€‚
</Aside>

<Steps>
1. å®‰è£… <SponsorLink href={sponsors.turso.docs.installCLILink} text='Turso CLI'/>
2. <SponsorLink href={sponsors.turso.docs.loginsignupLink} text='ç™»å½•æˆ–æ³¨å†Œ'/> Turso è´¦å·
3. åˆ›å»ºæ–°æ•°æ®åº“
   <TursoCLI tursoCli='db' type='create' arg='studiocms' />
4. è·å–å¹¶è®¾ç½® `ASTRO_DB_REMOTE_URL`

   4a. è¿è¡Œ `show` å‘½ä»¤æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯ï¼š
      <TursoCLI tursoCli='db' type='show' arg='studiocms' />

   4b. å¤åˆ¶ URL å€¼å¹¶è®¾ç½®ä¸º `ASTRO_DB_REMOTE_URL`ï¼š
      ```bash title=".env"
      ASTRO_DB_REMOTE_URL=libsql://studiocms-yourname.turso.io
      ```

5. è·å–å¹¶è®¾ç½® `ASTRO_DB_APP_TOKEN`

   5a. åˆ›å»ºæ–°ä»¤ç‰Œç”¨äºæ•°æ®åº“è®¤è¯ï¼š
      <TursoCLI tursoCli='db' type='tokens.create' arg='studiocms' />

   5b. å¤åˆ¶å‘½ä»¤è¾“å‡ºå¹¶è®¾ç½®ä¸º `ASTRO_DB_APP_TOKEN`ï¼š
      ```bash title=".env"
      ASTRO_DB_APP_TOKEN=eyJhbGciOiJF...3ahJpTkKDw
      ```

</Steps>

ç°åœ¨å¯ä»¥ç»§ç»­è®¾ç½®æ‚¨çš„ StudioCMS é¡¹ç›®äº†ï¼

### ä½¿ç”¨å…¶ä»–æä¾›å•†æˆ–è‡ªæ‰˜ç®¡ libSQL

libSQL åŒæ—¶æ”¯æŒ HTTP å’Œ WebSockets ä½œä¸ºè¿œç¨‹æœåŠ¡å™¨çš„ä¼ è¾“åè®®ï¼Œä¹Ÿæ”¯æŒæœ¬åœ°æ–‡ä»¶æˆ–å†…å­˜æ•°æ®åº“ã€‚

<ReadMore>æœ‰å…³æ‰€éœ€ç¯å¢ƒå˜é‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[æ•°æ®åº“è¿æ¥å‚æ•°][db-url-token]</ReadMore>

<ReadMore>äº†è§£æ‰€æœ‰ libSQL é€‰é¡¹ï¼ˆåŒ…æ‹¬æœ¬åœ°æ–‡ä»¶ï¼‰ï¼Œè¯·å‚é˜… [Astro æ–‡æ¡£ï¼šè¿œç¨‹ URL é…ç½®é€‰é¡¹](https://docs.astro.build/en/guides/astro-db/#remote-url-configuration-options)</ReadMore>

## åˆ›å»º StudioCMS é¡¹ç›®

<Tabs syncKey='install-method'>

<TabItem label="StudioCMS CLI" icon="rocket">

    1. ä½¿ç”¨ create å‘½ä»¤åˆ›å»º StudioCMS é¡¹ç›®

       ä½¿ç”¨é¢„ç½®æ¨¡æ¿åˆ›å»ºåŒ…å« StudioCMS çš„ Astro é¡¹ç›®ï¼š
            <PackageManagers type="create" pkg="studiocms@latest" />

       è¿è¡Œå‘½ä»¤åï¼Œå°†æç¤ºæ‚¨å›ç­”å‡ ä¸ªé¡¹ç›®ç›¸å…³é—®é¢˜ã€‚å®Œæˆåï¼ŒCLI å°†åœ¨æŒ‡å®šç›®å½•åˆ›å»ºæ–°çš„ Astro é¡¹ç›®ã€‚

       éšåç³»ç»Ÿä¼šæç¤ºæ‚¨å®Œæˆåç»­æ­¥éª¤ï¼ŒåŒ…æ‹¬ç¡®ä¿ç¯å¢ƒå˜é‡æ­£ç¡®è®¾ç½®ä»¥åŠè¿è¡Œé¡¹ç›®å®Œæˆå®‰è£…ã€‚

    2. è¿è¡Œ CLI åï¼Œè¯·ç¡®ä¿ `astro.config.mjs` æ–‡ä»¶æ­£ç¡®é…ç½®ï¼š

       ```ts twoslash title="astro.config.mjs" {2-4,11-12}
       import { defineConfig } from 'astro/config';
       import db from '@astrojs/db';
       import node from '@astrojs/node';
       import studioCMS from 'studiocms';

       export default defineConfig({
           site: 'https://demo.studiocms.dev/',
           output: 'server',
           adapter: node({ mode: "standalone" }),
           integrations: [
               db(),
               studioCMS(),
           ],
       });
       ```

</TabItem>

<TabItem label="Astro ä¼ ç»Ÿæ–¹æ³•" icon='astro'>

    1. åˆ›å»ºæ–°çš„ Astro é¡¹ç›®

       åˆ›å»ºåŸºæœ¬çš„ Astro é¡¹ç›®ï¼š
            <PackageManagers type="create" pkg="astro@latest" />

       è¿è¡Œå‘½ä»¤åï¼Œå°†æç¤ºæ‚¨å›ç­”å‡ ä¸ªé¡¹ç›®ç›¸å…³é—®é¢˜ã€‚å®Œæˆåï¼ŒCLI å°†åœ¨æŒ‡å®šç›®å½•åˆ›å»ºæ–°çš„ Astro é¡¹ç›®ã€‚

       æ‚¨å°†çœ‹åˆ° "Liftoff confirmed. Explore your project!" æ¶ˆæ¯åŠåç»­æ­¥éª¤å»ºè®®ã€‚

       `cd` è¿›å…¥æ–°é¡¹ç›®ç›®å½•ï¼š
       ```bash
       cd my-project
       ```

       å¦‚æœåœ¨ CLI å‘å¯¼ä¸­è·³è¿‡äº† npm å®‰è£…æ­¥éª¤ï¼Œè¯·ç¡®ä¿åœ¨ç»§ç»­å‰å®‰è£…ä¾èµ–ã€‚

    2. å®‰è£… StudioCMS é›†æˆåŠå…¶ä¾èµ–ï¼š
       <PackageManagers type="exec" pkg="astro" args="add db node studiocms" />

    3. æ›´æ–° `astro.config.mjs` æ–‡ä»¶ï¼š
       ```ts twoslash title="astro.config.mjs" {2-4,11-12}
       import { defineConfig } from 'astro/config';
       import db from '@astrojs/db';
       import node from '@astrojs/node';
       import studioCMS from 'studiocms';

       export default defineConfig({
           site: 'https://demo.studiocms.dev/',
           output: 'server',
           adapter: node({ mode: "standalone" }),
           integrations: [
               db(),
               studioCMS(),
           ],
       });
       ```

</TabItem>

<TabItem label="æ‰‹åŠ¨æ–¹æ³•" icon='seti:powershell'>

    1. åˆ›å»ºæ–°çš„ Astro é¡¹ç›®

       åˆ›å»ºåŸºæœ¬çš„ Astro é¡¹ç›®ï¼š
            <PackageManagers type="create" pkg="astro@latest" />

       è¿è¡Œå‘½ä»¤åï¼Œå°†æç¤ºæ‚¨å›ç­”å‡ ä¸ªé¡¹ç›®ç›¸å…³é—®é¢˜ã€‚å®Œæˆåï¼ŒCLI å°†åœ¨æŒ‡å®šç›®å½•åˆ›å»ºæ–°çš„ Astro é¡¹ç›®ã€‚

       æ‚¨å°†çœ‹åˆ° "Liftoff confirmed. Explore your project!" æ¶ˆæ¯åŠåç»­æ­¥éª¤å»ºè®®ã€‚

       `cd` è¿›å…¥æ–°é¡¹ç›®ç›®å½•ï¼š
       ```bash
       cd my-project
       ```

       å¦‚æœåœ¨ CLI å‘å¯¼ä¸­è·³è¿‡äº† npm å®‰è£…æ­¥éª¤ï¼Œè¯·ç¡®ä¿åœ¨ç»§ç»­å‰å®‰è£…ä¾èµ–ã€‚

    2. æ‰‹åŠ¨å®‰è£… StudioCMS é›†æˆå’Œä¾èµ–ï¼š
       <PackageManagers pkg="@astrojs/db @astrojs/node studiocms" />

    3. æ›´æ–° `astro.config.mjs` æ–‡ä»¶ï¼š
       ```ts twoslash title="astro.config.mjs" {2-4,11-12}
       import { defineConfig } from 'astro/config';
       import db from '@astrojs/db'; 
       import node from '@astrojs/node'; 
       import studioCMS from 'studiocms';

       export default defineConfig({
           site: 'https://demo.studiocms.dev/',
           output: 'server', 
           adapter: node({ mode: "standalone" }), 
           integrations: [
               db(), 
               studioCMS(),
           ],
       });
       ```

</TabItem>

</Tabs>

åœ¨é…ç½® StudioCMS `æ—¶éœ€ç‰¹åˆ«æ³¨æ„ï¼šastro.config.mjs` æ–‡ä»¶ä¸­çš„ â€‹`site` é…ç½®é¡¹æ˜¯å¿…éœ€å‚æ•°ï¼Œå¿…é¡»è®¾ç½®ä¸ºæ‚¨çš„ç«™ç‚¹å®é™… URL æˆ–ä¸´æ—¶å ä½ URL æ‰èƒ½ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œã€‚ï¼ˆä¾‹å¦‚ï¼š`https://demo.studiocms.dev/` æˆ– `http://localhost:4321/`ï¼‰

<Aside type="note" title="é€‚é…å™¨è¦æ±‚">
StudioCMS å¿…é¡»ä¾èµ– [Astro é€‚é…å™¨](https://docs.astro.build/en/guides/on-demand-rendering/#server-adapters)æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚è¯·ç¡®ä¿åœ¨æ‚¨çš„ `astro.config.mjs` é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æ”¯æŒ SSR è·¯ç”±çš„é€‚é…å™¨ã€‚
</Aside>

## é…ç½®è®¤è¯

StudioCMS è®¤è¯éœ€è¦è‡³å°‘åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®[åŠ å¯†å¯†é’¥][encryption-key]ã€‚

ä»¥ä¸‹æ˜¯ StudioCMS è®¤è¯æ‰€éœ€çš„ç¯å¢ƒå˜é‡ï¼š

```bash title=".env"
# ç”¨äºç”¨æˆ·åå¯†ç è®¤è¯çš„åŠ å¯†å¯†é’¥
CMS_ENCRYPTION_KEY="wqR+w...sRcg=="
```

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå®‰å…¨åŠ å¯†å¯†é’¥ï¼š
```bash
openssl rand --base64 16
``` 
å¹¶å°†è¾“å‡ºè®¾ç½®ä¸º `CMS_ENCRYPTION_KEY` çš„å€¼ã€‚

<ReadMore>
äº†è§£æ‰€æœ‰å¯ç”¨çš„è®¤è¯ç¯å¢ƒå˜é‡ï¼Œè¯·å‚é˜…[ç¯å¢ƒå˜é‡][environment-variables]é¡µé¢ã€‚
</ReadMore>

### å¯é€‰ï¼šé…ç½® oAuth è®¤è¯

StudioCMS æ”¯æŒ GitHubã€Discordã€Google å’Œ Auth0 çš„ oAuth è®¤è¯ã€‚è¦é…ç½® oAuthï¼Œéœ€è¦[åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®å¿…éœ€çš„ç¯å¢ƒå˜é‡][oauth-environment-variables]ï¼Œå¹¶ç¡®ä¿[åœ¨é…ç½®ä¸­å¯ç”¨äº†ç›¸åº”çš„æä¾›å•†][auth-config-ref]ã€‚

oAuth æä¾›å•†éœ€è¦è®¾ç½®å›è°ƒ URLï¼ˆç”¨æˆ·è®¤è¯åçš„é‡å®šå‘è·¯å¾„ï¼‰ã€‚

#### è®¾ç½®å›è°ƒ URL

æ ¹æ®æ‚¨çš„ç¯å¢ƒè®¾ç½®å›è°ƒ URLï¼š

| ç¯å¢ƒ       | å›è°ƒ URL                                  |
|------------|------------------------------------------|
| ç”Ÿäº§ç¯å¢ƒ   | `https://your-domain.tld/studiocms_api/auth/<provider>/callback` |
| æµ‹è¯•å¼€å‘   | `http://localhost:4321/studiocms_api/auth/<provider>/callback` |

#### å›è°ƒ URL è·¯å¾„ç¤ºä¾‹

ä¸åŒæä¾›å•†å¯¹åº”çš„å›è°ƒ URL è·¯å¾„ï¼š

| æä¾›å•†    | å›è°ƒ PATH                          |
|----------|-----------------------------------|
| GitHub   | `/studiocms_api/auth/github/callback` |
| Discord  | `/studiocms_api/auth/discord/callback` |
| Google   | `/studiocms_api/auth/google/callback` |
| Auth0    | `/studiocms_api/auth/auth0/callback` |

## é…ç½® `package.json` è„šæœ¬

åœ¨ `package.json` è„šæœ¬ä¸­æ·»åŠ  `--remote` å‚æ•°ï¼š

```json /--remote/ title="package.json"
{
    "name": "my-studiocms-project",
    "scripts": {
        "dev": "astro dev --remote",
        "build": "astro check & astro build --remote",
        "astro": "astro"
    }
}
```

## è¿è¡Œ StudioCMS é¡¹ç›®

å¾—ç›Šäº Astro çš„å¼ºå¤§åŠŸèƒ½ï¼ŒStudioCMS çš„è¿è¡Œéå¸¸ç®€å•ã€‚

### é¦–æ¬¡è®¾ç½®ï¼ˆæˆ–æ•°æ®è¡¨ç»“æ„æ›´æ–°æ—¶ï¼‰

åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    <PackageManagers type="exec" args="astro db push --remote" />
    <PackageManagers type="run" args="dev --remote" />

<Aside type="note">
å¦‚æœåœ¨ `package.json` æ–‡ä»¶ä¸­è®¾ç½®äº†è„šæœ¬ï¼Œå¯ä»¥çœç•¥ `--remote` å‚æ•°ã€‚è¯¦è§[é…ç½®è„šæœ¬](#configure-your-packagejson-scripts)éƒ¨åˆ†ã€‚
</Aside>

è¿è¡Œå‘½ä»¤åï¼Œæ‚¨å°†çœ‹åˆ°é¡¹ç›®åœ¨ `localhost:4321` è¿è¡Œçš„æ¶ˆæ¯ã€‚é¦–æ¬¡è®¾ç½®æ—¶ï¼Œè¯·è®¿é—® `http://localhost:4321/start` å®Œæˆ StudioCMS é…ç½®ã€‚

### æœ¬åœ° Astro å¼€å‘æ¨¡å¼è¿è¡Œ

åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    <PackageManagers type="run" args="dev --remote" />

è¿è¡Œåï¼Œè®¿é—® `http://localhost:4321` æŸ¥çœ‹æ‚¨çš„é¡¹ç›®ã€‚

**æ­å–œï¼** ğŸ¥³ æ‚¨å·²æˆåŠŸåœ¨ Astro é¡¹ç›®ä¸­å®‰è£… StudioCMSã€‚

### ä¸º StudioCMS æ·»åŠ å‰ç«¯

StudioCMS æ˜¯æ— å¤´ CMSï¼Œæ‚¨éœ€è¦è‡ªè¡Œåˆ›å»ºå‰ç«¯å±•ç¤ºå†…å®¹ã€‚å¦‚æœéœ€è¦é¢„æ„å»ºçš„å‰ç«¯ï¼Œè¯·æŸ¥çœ‹[åŒ…ç›®å½•][package-catalog]ä¸­çš„æ’ä»¶ã€‚

#### è®¾ç½®åšå®¢

å¦‚éœ€æ­å»ºåšå®¢ï¼Œå¯ä»¥ä½¿ç”¨ `@studiocms/blog` æ’ä»¶ï¼š

<PackageManagers type="install" pkg="@studiocms/blog" />

å®‰è£…åï¼Œåœ¨ `studiocms.config.mjs` æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶ï¼š

```ts twoslash title="studiocms.config.mjs"
import { defineStudioCMSConfig } from 'studiocms/config';
import blog from '@studiocms/blog';

export default defineStudioCMSConfig({
    dbStartPage: false,
    plugins: [
        blog(),
    ],
});
```

### æ„å»ºå’Œéƒ¨ç½² StudioCMS é¡¹ç›®

å®Œæˆ[é¦–æ¬¡è®¾ç½®](#first-time-setup-or-during-updates-if-the-tables-schema-is-updated)åï¼Œå³å¯æ„å»ºå¹¶éƒ¨ç½²é¡¹ç›®åˆ°æœåŠ¡å™¨ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒStudioCMS ä»ªè¡¨æ¿ä½äº `http://your-domain.tld/dashboard`ã€‚

è¯¥ä»ªè¡¨æ¿å¯ç”¨äºåœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­ç®¡ç†å†…å®¹å’Œè®¾ç½®ã€‚

> **å»ºè®®**ï¼šåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ä½¿ç”¨ StudioCMSï¼Œå¼€å‘æ¨¡å¼ä¸‹ä»ªè¡¨æ¿å¯èƒ½å‡ºç°é—®é¢˜ï¼ˆå¦‚ Vite ä¾èµ–é”™è¯¯ï¼‰ã€‚

## åç»­æ­¥éª¤

<ReadMore>
äº†è§£å¦‚ä½•è®¾ç½® StudioCMS çš„[ç¯å¢ƒå˜é‡][environment-variables]ã€‚
</ReadMore>

<ReadMore>
æŸ¥çœ‹[åŒ…ç›®å½•][package-catalog]ï¼Œå¯»æ‰¾å’Œä½¿ç”¨ StudioCMS æ’ä»¶ã€‚
</ReadMore>

<ReadMore>
é€šè¿‡ [StudioCMS å‚è€ƒæ–‡æ¡£][config-reference] äº†è§£é…ç½®é€‰é¡¹ã€‚
</ReadMore>

{/* Links */}
[package-catalog]: /zh-cn/package-catalog/
[environment-variables]: /zh-cn/start-here/environment-variables/
[config-reference]: /zh-cn/config-reference/
[db-url-token]: /zh-cn/start-here/environment-variables/#database-url-and-token-for-astrojsdb
[encryption-key]: /zh-cn/start-here/environment-variables/#encryption-key-for-studiocmsauth
[oauth-environment-variables]: /zh-cn/start-here/environment-variables/#oauth-authentication-environment-variables
[auth-config-ref]: /zh-cn/config-reference/dashboard/#authconfig
[self-hosted-libsql]: /zh-cn/guides/database/sqld-server/